(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{131:function(e,t){},133:function(e,t){},151:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(9),i=a.n(c),r=a(22),s=a(182),o=a(185),l=a(187),d=a(188),j=(a(58),a(19)),u=a(83),b=a(54),m=a.n(b),x=a(4),O=Object(n.createContext)(),p=Object(u.io)("https://powerful-spire-94986.herokuapp.com/"),f=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(j.a)(a,2),i=c[0],r=c[1],s=Object(n.useState)(!1),o=Object(j.a)(s,2),l=o[0],d=o[1],u=Object(n.useState)(),b=Object(j.a)(u,2),f=b[0],h=b[1],g=Object(n.useState)(""),v=Object(j.a)(g,2),C=v[0],y=v[1],w=Object(n.useState)({}),N=Object(j.a)(w,2),k=N[0],S=N[1],I=Object(n.useState)(""),D=Object(j.a)(I,2),W=D[0],z=D[1],A=Object(n.useState)(0),B=Object(j.a)(A,2),R=(B[0],B[1]),V=Object(n.useRef)(),E=Object(n.useRef)(),U=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then((function(e){h(e),V.current.srcObject=e})),R(3),p.on("me",(function(e){return z(e)})),p.on("callUser",(function(e){var t=e.from,a=e.name,n=e.signal;S({isReceivingCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(x.jsx)(O.Provider,{value:{call:k,callAccepted:i,myVideo:V,userVideo:E,stream:f,name:C,setName:y,callEnded:l,me:W,callUser:function(e){var t=new m.a({initiator:!0,trickle:!1,stream:f});t.on("signal",(function(t){p.emit("callUser",{userToCall:e,signalData:t,from:W,name:C})})),t.on("stream",(function(e){E.current.srcObject=e})),p.on("callAccepted",(function(e){r(!0),t.signal(e)})),U.current=t},leaveCall:function(){d(!0),U.current.destroy(),window.location.reload()},answerCall:function(){r(!0);var e=new m.a({initiator:!1,trickle:!1,stream:f});e.on("signal",(function(e){p.emit("answerCall",{signal:e,to:k.from})})),e.on("stream",(function(e){E.current.srcObject=e})),e.signal(k.signal),U.current=e},streamScreen:function(){}},children:t})},h=Object(s.a)((function(e){return{video:Object(r.a)({width:"700px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(r.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"5px",border:"2px solid white",margin:"5px"}}})),g=function(){var e=Object(n.useContext)(O),t=e.name,a=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,s=e.stream,j=e.call,u=h();return Object(x.jsxs)(o.a,{container:!0,className:u.gridContainer,children:[s&&Object(x.jsx)(l.a,{className:u.paper,id:"video-player-container",children:Object(x.jsxs)(o.a,{item:!0,xs:12,md:6,children:[Object(x.jsx)(d.a,{variant:"h5",gutterBottom:!0,children:t}),Object(x.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:u.video})]})}),a&&!r&&Object(x.jsx)(l.a,{className:u.paper,id:"video-player-container",children:Object(x.jsxs)(o.a,{item:!0,xs:12,md:6,children:[Object(x.jsx)(d.a,{variant:"h5",gutterBottom:!0,children:j.name}),Object(x.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:u.video})]})})]})},v=a(189),C=a(194),y=a(193),w=a(89),N=a(190),k=a(191),S=a(192),I=Object(s.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(r.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(r.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),D=function(e){var t=e.children,a=Object(n.useContext)(O),c=a.me,i=a.callAccepted,r=a.name,s=a.setName,u=a.callEnded,b=a.leaveCall,m=a.callUser,p=a.streamVoice,f=a.streamWebcam,h=a.streamScreen,g=Object(n.useState)(""),D=Object(j.a)(g,2),W=D[0],z=D[1],A=I();return Object(x.jsxs)(v.a,{className:A.container,children:[Object(x.jsxs)("div",{id:"button-container",children:[Object(x.jsx)(C.a,{variant:"contained",color:"secondary",startIcon:Object(x.jsx)(N.a,{fontSize:"large"}),onClick:p,id:"audio-button",className:A.margin,children:"Audio"}),Object(x.jsx)(C.a,{variant:"contained",color:"secondary",startIcon:Object(x.jsx)(N.a,{fontSize:"large"}),onClick:f,className:A.margin,children:"Webcam"}),Object(x.jsx)(C.a,{variant:"contained",color:"secondary",startIcon:Object(x.jsx)(N.a,{fontSize:"large"}),onClick:h,className:A.margin,children:"Share Screen"})]}),Object(x.jsxs)(l.a,{elevation:10,className:A.paper,children:[Object(x.jsx)("form",{className:A.root,noValidate:!0,autoComplete:"off",children:Object(x.jsxs)(o.a,{container:!0,className:A.gridContainer,children:[Object(x.jsxs)(o.a,{item:!0,xs:12,md:6,className:A.padding,children:[Object(x.jsx)(d.a,{gutterBottom:!0,variant:"h6",id:"text",children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u06a9\u0627\u0631\u0628\u0631"}),Object(x.jsx)(y.a,{id:"text",label:"\u0646\u0627\u0645",value:r,onChange:function(e){return s(e.target.value)},fullWidth:!0}),Object(x.jsx)(w.CopyToClipboard,{text:c,className:A.margin,children:Object(x.jsx)(C.a,{id:"text",variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(x.jsx)(k.a,{fontSize:"large"}),children:"\u06a9\u067e\u06cc \u06a9\u0631\u062f\u0646 ID"})})]}),Object(x.jsxs)(o.a,{item:!0,xs:12,md:6,className:A.padding,children:[Object(x.jsx)(d.a,{id:"text",gutterBottom:!0,variant:"h6",children:"\u0628\u0631\u0642\u0631\u0627\u0631\u06cc \u062a\u0645\u0627\u0633"}),Object(x.jsx)(y.a,{label:"\u0628\u0631\u0627\u06cc \u062a\u0645\u0627\u0633 ID",value:W,id:"text",onChange:function(e){return z(e.target.value)},fullWidth:!0}),i&&!u?Object(x.jsx)(C.a,{variant:"contained",id:"text",color:"secondary",startIcon:Object(x.jsx)(N.a,{fontSize:"large"}),fullWidth:!0,onClick:b,className:A.margin,children:"\u0642\u0637\u0639 \u062a\u0645\u0627\u0633"}):Object(x.jsx)(C.a,{id:"text",variant:"contained",color:"primary",startIcon:Object(x.jsx)(S.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return m(W)},className:A.margin,children:"\u0628\u0631\u0642\u0631\u0627\u0631\u06cc \u062a\u0645\u0627\u0633"})]})]})}),t]})]})},W=function(){var e=Object(n.useContext)(O),t=e.answerCall,a=e.call,c=e.callAccepted;return Object(x.jsx)(x.Fragment,{children:a.isReceivingCall&&!c&&Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(x.jsxs)("h3",{style:{color:"red"},children:[a.name," \u062f\u0631 \u062d\u0627\u0644 \u062a\u0645\u0627\u0633 "]}),Object(x.jsx)(C.a,{variant:"contained",color:"primary",onClick:t,children:"\u067e\u0627\u0633\u062e"})]})})},z=Object(s.a)((function(e){return{appBar:Object(r.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),A=function(){var e=z();return Object(x.jsxs)("div",{className:e.wrapper,children:[Object(x.jsx)(g,{}),Object(x.jsx)(D,{children:Object(x.jsx)(W,{})})]})};a(151);i.a.render(Object(x.jsx)(f,{children:Object(x.jsx)(A,{})}),document.getElementById("root"))},58:function(e,t,a){}},[[152,1,2]]]);
//# sourceMappingURL=main.74b383f3.chunk.js.map